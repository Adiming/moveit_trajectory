# Use Moveit to generate trajectory plan

By using Moveit API to generate trajectory plan

## Description

The original pitasc do not contain any motion planning algorithm to avoid the issue like singularity. With the support of Moveit, the motion trajectory of end effector can be generated automatically by its API, namely MoveGroupInterface::Plan.

After pitasc recieving the motion plan points, it will execute the plan to move to target position.

### Current statue

The motion plan can be generated by generator but still do not combine with Pitas

For the further step which combines with pitasc can refer to following projects:
```
https://gitlab.cc-asp.fraunhofer.de/pitasc/techpacks/pitasc_teleop
```
```
https://gitlab.cc-asp.fraunhofer.de/pitasc/techpacks/teleop_device_drivers/teleop_device_interface
```

### Project structure

* Under src folder there are two projects can be found
* panda_moveit_config: for a example execution demo with panda robot to show motion trajectory
* trajectory_follow: trajectory generation
    * desired_position.cpp: As rosservice client passing desired postion in command line with service name "desired_position" and print out the position of every joint
    * trajectory_generator.cpp: Using Moveit API to generate motion plan and response to rosservice client with name "desired_position"
    * trajectory_2.cpp: Use rosparameter to set a desired postion, generate and publish the plan
    * trajectory_get_data.cpp: Subscribe the topic "trajectory_plan" and print out the trajectory
    

## Getting Started

### Dependencies

* Install Moveit firstly
```
https://github.com/ros-planning/moveit.git
```

### Installing

* Install Moveit and this project

### Executing program

```
catkin build
roslaunch panda_moveit_config demo.launch
rosrun trajectory_follow trajectory_generator
```
* passed desired position (two ways)
    * rosrun trajectory_follow desired_position + desired position like(x,y,z,w)
    * use rosservice call /desired position TAB enter desired position

### Note

If the controled robot is not panda, and want to generate move plan for another robot. Modify the "planning_group" name in trajectory_generator.cpp. The planning_group name comes from the robot model which is generated by Moveit Setup Assistant. check documentation with following link:
```
https://ros-planning.github.io/moveit_tutorials/doc/setup_assistant/setup_assistant_tutorial.html
```

## Authors

Contributors names and contact info

Jan Krieglstein

Junjie Ming


